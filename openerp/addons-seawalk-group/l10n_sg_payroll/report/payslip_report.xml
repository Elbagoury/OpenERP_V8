<?xml version="1.0" encoding="utf-8"?>
<openerp>
<data>

<template id="l10n_sg_payroll.external_header_payslip">
	<div class="header">
        <!-- Multicompany -->
        <t t-if="o and 'company_id' in o">
            <t t-set="company" t-value="o.company_id"/>
        </t>
        <t t-if="not o or not 'company_id' in o">
            <t t-set="company" t-value="res_company"/>
        </t>

        <!--div class="col-xs-12 text-right">
	    <img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % company.logo" style="height:80px;width:180px;"/>
                        <img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % company.logo" style="max-height: 45px;"/>
	</div-->
        <div class="row">
            <div class="col-xs-5 col-xs-offset-3 text-center">
                <h4><strong><span t-field="company.name"/></strong></h4>
                <div><t t-esc="company.street"></t>, <t t-esc="company.street2"></t></div>
	        <div><t t-if="company.country_id" t-esc="company.country_id.name"></t> <t t-esc="company.zip"></t></div>
	        <div><span t-if="company.phone">TEL: </span><t t-if="company.phone" t-esc="company.phone"></t> <span t-if="company.fax">FAX: </span><t t-esc="company.fax"></t></div>
		<div t-if="company.email">EMAIL: <t t-esc="company.email"></t></div>
		<div t-if="company.website">Website: <t t-esc="company.website"></t></div>
                <div>
                    <h4>
                    <strong>
        		<span>Payslip</span>
        	    </strong>
        	    </h4>
                </div>
            </div>
            <div class="col-xs-3 col-xs-offset-1">
                <img t-if="company.logo" t-att-src="'data:image/png;base64,%s' % company.logo" style="height:120px;width:160px;"/>
            </div>
        </div>



    </div>
</template>

<template id="l10n_sg_payroll.external_footer_payslip">
	<div class="footer">
        <div class="row col-xs-12" style="padding-top: 30px;">
        	<div class="col-xs-5">
        		<div style="border-top: 2px dashed black;"><strong>Employee Signature</strong></div>
        	</div>
        	<div class="col-xs-2"></div>
        	<div class="col-xs-5">
        		<div style="border-top: 2px dashed black;"><strong>Authorized Person</strong></div>
        	</div>
        </div>
    </div>
</template>

<template id="l10n_sg_payroll.report_hr_payslip_document">
	<t t-call="report.html_container">
		<t t-foreach="docs" t-as="o">
		    <t t-call="l10n_sg_payroll.external_header_payslip"/>
		    <div class="page" style="padding-top: 50px;">
				<div class="row">
					<div class="oe_structure"/>
	        		<div class="row mt5 o_height_25">
	        			<div class="col-xs-12">
	        				<div class="col-xs-6 o_underline">
	        					<span class="col-xs-6 text-left">Name</span>
	        					<span class="col-xs-6 text-left"><span t-field="o.employee_id.name"></span></span>
	        				</div>
	        				<span class="col-xs-1"></span>
	        			</div>
	        			<div class="col-xs-12">
	        				<div class="col-xs-6 o_underline">
	        					<span class="col-xs-6 text-left">Designation</span>
	        					<span class="col-xs-6 text-left"><span t-if="o.employee_id.job_id" t-field="o.employee_id.job_id.name"></span></span>
	        				</div>
	        			</div>
	        		</div>
	        		<div class="row mt5 o_height_25" style="padding-bottom: 5px;">
	        			<div class="col-xs-12">
	        				<div class="col-xs-6 o_underline">
	        					<span class="col-xs-6 text-left">Month and Year</span>
	        					<span class="col-xs-6 text-left"><t t-esc="datetime.datetime.strptime(o.date_from, '%Y-%m-%d').strftime('%B-%Y')"></t></span>
	        				</div>
	        			</div>
	        		</div>
	        		<div class="row mt32">
	        			<t t-set="total_rows" t-value="((len(o.get_addition_lines()) > len(o.get_deduction_lines()) and len(o.get_addition_lines())) or (len(o.get_deduction_lines()) > len(o.get_addition_lines()) and len(o.get_deduction_lines())))"></t>
	        			<div class="col-xs-6" style="padding-right: 0px;">
		        			<table class="o_earning_table table table-responsive" style="border: 1px solid;">
		        				<th class="border_bottom border_top border_right">Earnings</th>
		        				<th class="border_bottom border_top text-right">Amount</th>
		        				<!-- We can implement function in payslip.line like get_all_addition/get_all_deduction -->
		        				<t t-set="addition_count" t-value="len(o.get_addition_lines())"></t>
		        				<t t-foreach="o.get_addition_lines()" t-as="line">
	        						<tr>
	        							<t t-set="name" t-value="line.name"></t>
	        							<td><t t-esc="name[:50]"></t></td>
	        							<td class="text-right"><span t-field="line.total"></span></td>
	        						</tr>
		        				</t>
		        				<t t-set="remaining_count" t-value="[x for x in range(0, (int(total_rows) - int(addition_count)))]"></t>
		        				<t t-if="remaining_count">
		        					<t t-foreach="remaining_count" t-as="line">
		        						<tr>
	        								<td style="min-height: 37px;height: 37px;"></td>
	        								<td style="min-height: 37px;height: 37px;"></td>
	        							</tr>
		        					</t>
		        				</t>
		        				<tr>
                                	<td class="border_bottom border_top"><strong>Total Addition</strong></td>
                                	<td class="border_bottom border_top text-right"><strong><span t-esc="o.total_pay_lines('add')"/></strong></td>
                                </tr>
                                <tr>
                                	<td class="border_bottom border_top" style="height: 37px;"></td>
                                	<td class="border_bottom border_top" style="height: 37px;"></td>
                                </tr>
		        			</table>
		        		</div>
		        		<div class="col-xs-6" style="padding-left: 0px;">
		        			<table class="o_deduction_table table table-responsive" style="border: 1px solid; border-left: 0px;">
		        				<th class="border_bottom border_top border_right">Deductions</th>
		        				<th class="border_bottom border_top text-right">Amount</th>
		        				<t t-set="deduction_count" t-value="len(o.get_deduction_lines())"></t>
		        				<t t-foreach="o.get_deduction_lines()" t-as="line">
	        						<tr>
	        							<t t-set="name" t-value="line.name"></t>
	        							<td><t t-esc="name[:50]"></t></td>
	        							<td class="text-right"><span t-field="line.total"></span></td>
	        						</tr>
		        				</t>
		        				<t t-set="remaining_count" t-value="[x for x in range(0, (int(total_rows) - int(deduction_count)))]"></t>
		        				<t t-if="remaining_count">
		        					<t t-foreach="remaining_count" t-as="line">
		        						<tr>
	        								<td style="min-height: 37px;height: 37px;"></td>
	        								<td style="min-height: 37px;height: 37px;"></td>
	        							</tr>
		        					</t>
		        				</t>
		        				<tr>
                                	<td class="border_bottom border_top"><strong>Total Deductions</strong></td>
                                	<td class="border_bottom border_top text-right"><strong><span t-esc="o.total_pay_lines('ded')"/></strong></td>
                                </tr>
                                <tr>
                                	<td class="border_bottom border_top"><strong>Net Salary</strong></td>
                                	<td class="border_bottom border_top text-right"><strong><span t-esc="o.get_net_salary()"/></strong></td>
                                </tr>
		        			</table>
		        		</div>
	        		</div>
	        		<div class="row">
	        			<div class="col-xs-6" style="padding-right: 0px">
		        			<table class="table table-responsive" style="border: 1px solid !important;">
                                <tr>
                                	<td class="border_bottom border_top"><strong>Employee CPF</strong></td>
                                	<td class="border_bottom border_top"></td>
                                	<td class="border_bottom border_top text-right"><strong><span t-esc="o.employee_cpf"/></strong></td>
                                </tr>
                                <tr>
                                	<td class="border_bottom border_top"><strong>Employer CPF</strong></td>
                                	<td class="border_bottom border_top"></td>
                                	<td class="border_bottom border_top text-right"><strong><span t-esc="o.employer_cpf"/></strong></td>
                                </tr>
		        			</table>
		        		</div>
	        		</div>
	        		<div class="oe_structure"/>
				</div>
	        </div>
		    <t t-call="l10n_sg_payroll.external_footer_payslip"/>
		</t>
	</t>
</template>
</data>
</openerp>